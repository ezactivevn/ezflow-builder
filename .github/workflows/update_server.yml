name: Update Server

on:
    workflow_dispatch:
        inputs:
            branch:
                description: 'Branch'
                required: true
                default: 'develop'
            repository_url:
                description: 'Repository URL'
                required: true
                default: 'ezactivevn/ezleague-core'

jobs:
  dispatch:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v3
        with:
          ref: ${{ github.event.inputs.branch }}
          repository: ${{ github.event.inputs.repository_url }}
          token: ${{ secrets.PAT_TOKEN }}


      - name: Zip folder server
        run: zip -r server.zip server

      - name: Move file with sudo and password
        run: echo ${{ secrets.GCLOUD_PASSWORD }} | sudo -S mv server.zip /var/www/html
        
     


      

        

      
